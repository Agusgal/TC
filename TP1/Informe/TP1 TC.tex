\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[spanish, es-tabla]{babel}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{float}
\usepackage{graphicx}
\graphicspath{ {./Imagenes/} }

\usepackage{multirow}
\setlength{\doublerulesep}{\arrayrulewidth}

\usepackage{array}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\usepackage[american]{circuitikz}

\usepackage{fancyhdr}

\usepackage{units} 

\pagestyle{fancy}
\fancyhf{}
\lhead{22.01 Teoría de Circuitos}
\rhead{Mechoulam, Lambertucci, Rodriguez, Londero}
\rfoot{Página \thepage}



\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								CARATULA								%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\input{Caratula.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%								INFORME									%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introducción}

En el presente informe se estudiaron distintos tipos de filtros con un enfoque analítico teórico, práctico y además computacional. Para facilitar esto último se creó una interfaz gráfica que logra superponer distintas curvas obtenidas mediante cálculos teóricos de transferencias, mediciones con osciloscopio o simulaciones con LTSpice.

\section{Desarrollo}

\subsection{Ejercicio 1: Filtro Twin T Notch}

Se diseñó el filtro Twin T Notch mostrado en la Figura (\ref{fig:filtroinicial}). Este filtro posee una frecuencia de corte de $ 8.1 \ kHz $. Para eso se requerían resistencias de $ 9 \ k\Omega $ y $ 4.5 \ k\Omega $ y capacitores de $ 2.2 \ nF $ y $ 4.4 \ nF $. Considerando los valores comerciales, se seleccionaron resistencias de $ 6.8 \ k\Omega $ y $ 2.2 \ k\Omega $ en serie para obtener los $ 9 \ k\Omega $ y dos resistencias de $ 10 \ k\Omega $ y $ 8,2 \ k\Omega $ en paralelo $ 4.5 \ k\Omega $, mientras que para los capacitores, se eligieron 2 de $ 2.2 \ nF $ en paralelo para lograr los $ 4.4 \ nF $ deseados.
De aquí en más se considera $ R = 9 \ k\Omega $ y $ C = 2.2 \ nF $.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth ,trim={0 0.1cm  0.5cm 0},clip]{ej1inicial.jpg}
\caption{Filtro Twin T Notch sin simplificar, tomando en consideración las relaciones dadas entre resistores y capacitores.}
	\label{fig:filtroinicial}
\end{figure}

Aplicando el teorema de Kennelly para transformar T a Pi, se obtiene el circuito simplificado de la Figura (\ref{fig:filtrosimplificado}), donde se tiene que
\[Z_1=\frac{1+SCR}{SC}\hspace{1em};\hspace{1em} Z_2=2R(1+SCR) \hspace{1em};\hspace{1em} Z'_2=\frac{2(SCR+1)}{R(SC)^2}\]

\begin{figure}[H]
	\centering
	\includegraphics[width=0.4\textwidth, trim={0 0.1cm  0 0.1cm},clip]{ej1kennellly.jpg}
\caption{Filtro Twin T Notch luego de aplicar el teorema de Kenelly.}
	\label{fig:filtrosimplificado}
\end{figure}

Luego, se observa que el circuito puede simplificarse aún mas teniendo en cuenta las impedancias en paralelo. Finalmente, se obtiene el circuito mostrado en la Figura (\ref{fig:filtrofinal}).

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{ej1simplificado.jpg}
\caption{Filtro Twin T Notch simplificado.}
	\label{fig:filtrofinal}
\end{figure}

Realizando los cálculos de la transferencia en el circuito simplificado, se obtiene que
\begin{equation}
 \frac{Vo}{Vi}=H(S)=\frac{ \left( SCR \right)^2 + 1}{\left( SCR \right)^2 + 4SCR + 1}
 \label{equ:Hhdes}
\end{equation} 
Luego, la respuesta en frecuencia será
\begin{equation}
 H(j\omega)=\frac{ \left( j 2\pi f CR \right)^2 + 1}{\left( j 2\pi f CR \right)^2 + j 8\pi fCR + 1}
 \label{equ:Hdejomega}
\end{equation}
Antitransformando por Fourier, se obtiene la respuesta impulsiva
\begin{equation}
 h(t)=\delta \left( t \right) \ + \ \frac{2}{RC\sqrt{3}} \left[ \left( 2 + \sqrt{3} \right) e^{-t\frac{2 + \sqrt{3}}{RC}} + \left( \sqrt{3} - 2 \right) e^{t\frac{\sqrt{3} - 2}{RC}} \right]
 \label{equ:hdet}
\end{equation}


\subsection{Ejercicio 2: Filtro pasa-bajos RC}
Se simuló y se armó en un protoboard un filtro pasa-bajos RC, seleccionando los valores de los componentes adecuados para lograr que la frecuencia de corte sea de $ 48 \ kHz $. Los componentes utilizados fueron dos resistencias, una de $22 \ \Omega$ y otra de $680 \ \Omega$, colocadas en serie, y un capacitor de $4.7 \ nF$, contemplando los valores comerciales.
Dicho circuito fue alimentado con una señal cuadrada de $ 10 \ V_{PP} $ con una frecuencia de $ 24 \ kHz $.
Simulando dicho circuito, se llegan a los resultados mostrados en la Figura (\ref{fig:simu2}).

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{Entrada-Salida.png}
\caption{Entrada (en azul) y salida (en amarillo) del circuito armado.}
	\label{fig:simu2}
\end{figure}

En este se observa que la salida posee un ``delay'' con respecto a la entrada, es decir, el valor pico de esta última no es alcanzado por la salida sino hasta pasado un tiempo de medio período. Existen dos formas posibles de explicar dicha observación.
El primer enfoque viene dado de la mano de la carga del capacitor, la cual se sabe que no es instantánea, demorando así la obtención del valor pico. El segundo se basa en observar los coeficientes de la serie de Fourier del circuito. Como se ha dicho previamente, este circuito es un pasa-bajos, por lo tanto, las frecuencias altas son atenuadas, de esta forma, al eliminarlas, no se obtiene la totalidad de ellas causando que la onda de salida no sea un cuadrado perfecto. Esto se muestra en la Figura (\ref{fig:armonicoscomparacion}), donde se observa como estos se van atenuando en comparación con la entrada.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth]{ComparacionDeArmionicos}
\caption{Comparación de armónicos de la entrada (en verde) y salida (en rojo) del circuito armado.}
	\label{fig:armonicoscomparacion}
\end{figure}

Por otro lado, las mediciones se observan en la Figura (\ref{fig:medicion2}). Cabe destacar que en dicha figura, la señal cuadrada de la fuente no posee una forma cuadra perfecta debido a la baja impedancia de entrada de la fuente.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth , trim={0.7cm 6.25cm  0 3.5cm},clip]{scope_1}
	%trim={<left> <lower> <right> <upper>}
\caption{Entrada (en violeta) y salida (en amarillo) del circuito a $ 24 \ kHz $.}
	\label{fig:medicion2}
\end{figure}

De esta forma se puede puede comparar el diagrama de BODE teórico con el real observando las Figuras (\ref{fig:bodecomparacion}) y (\ref{fig:armonicoscomparacion}).

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{BodeRealVsMedido}
\caption{Comparación del BODE real (en azul) con el teórico (en rojo).}
	\label{fig:bodecomparacion}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{FaseRealVsMedido}
\caption{Comparación de las fases del BODE real (en azul) con el teórico (en rojo).}
	\label{fig:fasecomparacion}
\end{figure}

En ambas figuras es posible ver que las mediciones se corresponden a los valores esperados, dejando pasar las frecuencias bajas y atenuando las altas ...

De esta forma, se puede graficar tanto el modulo de la respuesta en frecuencia en decibles y los armónicos simulados,

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{ArmonicosVsTransferencia}
\caption{Grafico de transferencia y armónicos simulados.}
	\label{fig:aromincosvstransf}
\end{figure}

Repitiendo las mediciones con una señal de las mismas características, pero con una frecuencia de $ 480 \ Hz $ se observó que, a diferencia de lo observado en la Figura (\ref{fig:medicion2}), la señal de salida se acopla mejor a la entrada debido a que esta, al ser de baja frecuencia, no es atenuada como en el caso anterior.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\textwidth , trim={0.7cm 6.25cm  0 3.5cm},clip]{scope_3}
	%trim={<left> <lower> <right> <upper>}
\caption{Entrada (en violeta) y salida (en amarillo) del circuito a $ 480 \ Hz $.}
	\label{fig:medicion2}
\end{figure}

Finalmente, se puede observar que dicho circuito puede ser utilizado como un integrador atenuado a muy altas frecuencias, ya qué

\begin{equation}
	H \left(S \right) = \frac{1}{SRC \ + 1} \approx \frac{1}{RC} \cdot \frac{1}{S}
\end{equation}

\subsection{Ejercicio 3: Plot Tool 2019}
Finalmente, en este punto se programó una GUI en Phyton que permite realizar gráficos de diagramas de BODE. Dicho programa permite analizar funciones transferencia analíticas, archivos de LTSpice, ... 
Ademas de comparar con facilidad varios diagramas de BODE y de diversas fuentes, el programa permite ...

\section{Conclusiones}


\end{document}
